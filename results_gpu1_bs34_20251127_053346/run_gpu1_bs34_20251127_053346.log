[05:33:47] ======================================================================
[05:33:47] ğŸ”¬ Stateful KV Cache ç‰ˆæœ¬ - Regex Force Generate + Sleep Env Time
[05:33:47] ======================================================================
[05:33:47] ğŸš€ æ ¸å¿ƒä¼˜åŒ–: é¿å…æ¯è½® full prefillï¼ŒRuntime è‡ªåŠ¨å¤ç”¨ KV
[05:33:47]    â†’ èŠ‚çœ >99% çš„ prefill è®¡ç®—ï¼Œé¢„è®¡ååæå‡ 3-4x
[05:33:47] ğŸ’¡ Regex Force Generate: ä½¿ç”¨regexé”æ­»è¾“å‡ºä¸ºåŸå§‹response
[05:33:47]    â†’ æ—¢æœ‰çœŸå®çš„generateæ—¶é—´ï¼Œåˆç¡®ä¿è¾“å‡ºå®Œå…¨ä¸€è‡´
[05:33:47] â±ï¸  Sleep Env Time: æ¯è½®ä¹‹é—´sleepç¯å¢ƒæ‰§è¡Œæ—¶é—´ï¼ˆæ¨¡æ‹ŸçœŸå®åœºæ™¯ï¼‰
[05:33:47] ğŸ“Š è¿½è¸ª: æ»‘åŠ¨çª—å£ååé‡ï¼ˆ10ç§’çª—å£ï¼Œå¸¦è¡°å‡ï¼‰
[05:33:47] ======================================================================
[05:33:47] ğŸ¤– æ¨¡å‹: Qwen2.5-14B (128kä¸Šä¸‹æ–‡)
[05:33:47] ğŸ¯ é…ç½®: GPU 1 | 50æ¡è½¨è¿¹ | 50è½®å¯¹è¯
[05:33:47] ğŸ”¢ æµ‹è¯•: Batch Size = [3, 4]
[05:33:47] ======================================================================
[05:33:47] 
[1/3] åŠ è½½...
[05:33:48] âœ“ 50æ¡è½¨è¿¹
[05:33:48] 
[2/3] åŠ è½½æ¨¡å‹...
[05:33:48] ä¼˜åŒ–é…ç½®: æé«˜æ˜¾å­˜åˆ©ç”¨ç‡
[05:33:48] ä½¿ç”¨ç«¯å£: 30010
/minimax-dialogue/users/ruobai/cogito_dev/course_project_854/.venv/lib/python3.11/site-packages/transformers/utils/hub.py:110: FutureWarning: Using `TRANSFORMERS_CACHE` is deprecated and will be removed in v5 of Transformers. Use `HF_HOME` instead.
  warnings.warn(
[2025-11-27 05:33:59] WARNING server_args.py:1213: Attention backend not explicitly specified. Use fa3 backend by default.
/minimax-dialogue/users/ruobai/cogito_dev/course_project_854/.venv/lib/python3.11/site-packages/transformers/utils/hub.py:110: FutureWarning: Using `TRANSFORMERS_CACHE` is deprecated and will be removed in v5 of Transformers. Use `HF_HOME` instead.
  warnings.warn(
/minimax-dialogue/users/ruobai/cogito_dev/course_project_854/.venv/lib/python3.11/site-packages/transformers/utils/hub.py:110: FutureWarning: Using `TRANSFORMERS_CACHE` is deprecated and will be removed in v5 of Transformers. Use `HF_HOME` instead.
  warnings.warn(
/minimax-dialogue/users/ruobai/cogito_dev/course_project_854/.venv/lib/python3.11/site-packages/transformers/utils/hub.py:110: FutureWarning: Using `TRANSFORMERS_CACHE` is deprecated and will be removed in v5 of Transformers. Use `HF_HOME` instead.
  warnings.warn(
[Gloo] Rank 0 is connected to 0 peer ranks. Expected number of connected peer ranks is : 0
[Gloo] Rank 0 is connected to 0 peer ranks. Expected number of connected peer ranks is : 0
[Gloo] Rank 0 is connected to 0 peer ranks. Expected number of connected peer ranks is : 0
[Gloo] Rank 0 is connected to 0 peer ranks. Expected number of connected peer ranks is : 0
Loading safetensors checkpoint shards:   0% Completed | 0/8 [00:00<?, ?it/s]
Loading safetensors checkpoint shards:  12% Completed | 1/8 [00:00<00:04,  1.40it/s]
Loading safetensors checkpoint shards:  25% Completed | 2/8 [00:01<00:04,  1.23it/s]
Loading safetensors checkpoint shards:  38% Completed | 3/8 [00:02<00:04,  1.20it/s]
Loading safetensors checkpoint shards:  50% Completed | 4/8 [00:03<00:03,  1.18it/s]
Loading safetensors checkpoint shards:  62% Completed | 5/8 [00:04<00:02,  1.18it/s]
Loading safetensors checkpoint shards:  75% Completed | 6/8 [00:05<00:01,  1.18it/s]
Loading safetensors checkpoint shards:  88% Completed | 7/8 [00:05<00:00,  1.18it/s]
Loading safetensors checkpoint shards: 100% Completed | 8/8 [00:06<00:00,  1.40it/s]
Loading safetensors checkpoint shards: 100% Completed | 8/8 [00:06<00:00,  1.27it/s]

  0%|          | 0/36 [00:00<?, ?it/s]Capturing batches (bs=256 avail_mem=85.85 GB):   0%|          | 0/36 [00:00<?, ?it/s]Capturing batches (bs=256 avail_mem=85.85 GB):   3%|â–         | 1/36 [00:00<00:08,  4.16it/s]Capturing batches (bs=248 avail_mem=85.70 GB):   3%|â–         | 1/36 [00:00<00:08,  4.16it/s]Capturing batches (bs=240 avail_mem=85.69 GB):   3%|â–         | 1/36 [00:00<00:08,  4.16it/s]Capturing batches (bs=240 avail_mem=85.69 GB):   8%|â–Š         | 3/36 [00:00<00:03,  9.13it/s]Capturing batches (bs=232 avail_mem=85.68 GB):   8%|â–Š         | 3/36 [00:00<00:03,  9.13it/s]Capturing batches (bs=224 avail_mem=85.68 GB):   8%|â–Š         | 3/36 [00:00<00:03,  9.13it/s]Capturing batches (bs=224 avail_mem=85.68 GB):  14%|â–ˆâ–        | 5/36 [00:00<00:02, 11.20it/s]Capturing batches (bs=216 avail_mem=85.67 GB):  14%|â–ˆâ–        | 5/36 [00:00<00:02, 11.20it/s]Capturing batches (bs=208 avail_mem=85.66 GB):  14%|â–ˆâ–        | 5/36 [00:00<00:02, 11.20it/s]Capturing batches (bs=208 avail_mem=85.66 GB):  19%|â–ˆâ–‰        | 7/36 [00:00<00:02, 12.62it/s]Capturing batches (bs=200 avail_mem=85.65 GB):  19%|â–ˆâ–‰        | 7/36 [00:00<00:02, 12.62it/s]Capturing batches (bs=192 avail_mem=85.65 GB):  19%|â–ˆâ–‰        | 7/36 [00:00<00:02, 12.62it/s]Capturing batches (bs=192 avail_mem=85.65 GB):  25%|â–ˆâ–ˆâ–Œ       | 9/36 [00:00<00:01, 13.74it/s]Capturing batches (bs=184 avail_mem=85.64 GB):  25%|â–ˆâ–ˆâ–Œ       | 9/36 [00:00<00:01, 13.74it/s]Capturing batches (bs=176 avail_mem=85.63 GB):  25%|â–ˆâ–ˆâ–Œ       | 9/36 [00:00<00:01, 13.74it/s]Capturing batches (bs=176 avail_mem=85.63 GB):  31%|â–ˆâ–ˆâ–ˆ       | 11/36 [00:00<00:01, 14.59it/s]Capturing batches (bs=168 avail_mem=85.62 GB):  31%|â–ˆâ–ˆâ–ˆ       | 11/36 [00:00<00:01, 14.59it/s]Capturing batches (bs=160 avail_mem=85.62 GB):  31%|â–ˆâ–ˆâ–ˆ       | 11/36 [00:00<00:01, 14.59it/s]Capturing batches (bs=160 avail_mem=85.62 GB):  36%|â–ˆâ–ˆâ–ˆâ–Œ      | 13/36 [00:01<00:01, 14.86it/s]Capturing batches (bs=152 avail_mem=85.61 GB):  36%|â–ˆâ–ˆâ–ˆâ–Œ      | 13/36 [00:01<00:01, 14.86it/s]Capturing batches (bs=144 avail_mem=85.60 GB):  36%|â–ˆâ–ˆâ–ˆâ–Œ      | 13/36 [00:01<00:01, 14.86it/s]Capturing batches (bs=144 avail_mem=85.60 GB):  42%|â–ˆâ–ˆâ–ˆâ–ˆâ–     | 15/36 [00:01<00:01, 14.96it/s]Capturing batches (bs=136 avail_mem=85.59 GB):  42%|â–ˆâ–ˆâ–ˆâ–ˆâ–     | 15/36 [00:01<00:01, 14.96it/s]Capturing batches (bs=128 avail_mem=85.59 GB):  42%|â–ˆâ–ˆâ–ˆâ–ˆâ–     | 15/36 [00:01<00:01, 14.96it/s]Capturing batches (bs=128 avail_mem=85.59 GB):  47%|â–ˆâ–ˆâ–ˆâ–ˆâ–‹     | 17/36 [00:01<00:01, 15.04it/s]Capturing batches (bs=120 avail_mem=85.58 GB):  47%|â–ˆâ–ˆâ–ˆâ–ˆâ–‹     | 17/36 [00:01<00:01, 15.04it/s]Capturing batches (bs=112 avail_mem=85.57 GB):  47%|â–ˆâ–ˆâ–ˆâ–ˆâ–‹     | 17/36 [00:01<00:01, 15.04it/s]Capturing batches (bs=112 avail_mem=85.57 GB):  53%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–    | 19/36 [00:01<00:01, 15.21it/s]Capturing batches (bs=104 avail_mem=85.57 GB):  53%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–    | 19/36 [00:01<00:01, 15.21it/s]Capturing batches (bs=96 avail_mem=85.56 GB):  53%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–    | 19/36 [00:01<00:01, 15.21it/s] Capturing batches (bs=96 avail_mem=85.56 GB):  58%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Š    | 21/36 [00:01<00:00, 15.06it/s]Capturing batches (bs=88 avail_mem=85.55 GB):  58%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Š    | 21/36 [00:01<00:00, 15.06it/s]Capturing batches (bs=80 avail_mem=85.54 GB):  58%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Š    | 21/36 [00:01<00:00, 15.06it/s]Capturing batches (bs=80 avail_mem=85.54 GB):  64%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–   | 23/36 [00:01<00:00, 14.94it/s]Capturing batches (bs=72 avail_mem=85.53 GB):  64%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–   | 23/36 [00:01<00:00, 14.94it/s]Capturing batches (bs=64 avail_mem=85.52 GB):  64%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–   | 23/36 [00:01<00:00, 14.94it/s]Capturing batches (bs=64 avail_mem=85.52 GB):  69%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‰   | 25/36 [00:01<00:00, 15.01it/s]Capturing batches (bs=56 avail_mem=85.51 GB):  69%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‰   | 25/36 [00:01<00:00, 15.01it/s]Capturing batches (bs=48 avail_mem=85.51 GB):  69%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‰   | 25/36 [00:01<00:00, 15.01it/s]Capturing batches (bs=48 avail_mem=85.51 GB):  75%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ  | 27/36 [00:01<00:00, 15.13it/s]Capturing batches (bs=40 avail_mem=85.50 GB):  75%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ  | 27/36 [00:01<00:00, 15.13it/s]Capturing batches (bs=32 avail_mem=85.49 GB):  75%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ  | 27/36 [00:02<00:00, 15.13it/s]Capturing batches (bs=32 avail_mem=85.49 GB):  81%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  | 29/36 [00:02<00:00, 15.30it/s]Capturing batches (bs=24 avail_mem=85.48 GB):  81%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  | 29/36 [00:02<00:00, 15.30it/s]Capturing batches (bs=16 avail_mem=85.48 GB):  81%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  | 29/36 [00:02<00:00, 15.30it/s]Capturing batches (bs=16 avail_mem=85.48 GB):  86%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ | 31/36 [00:02<00:00, 14.08it/s]Capturing batches (bs=12 avail_mem=85.47 GB):  86%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ | 31/36 [00:02<00:00, 14.08it/s]Capturing batches (bs=8 avail_mem=85.46 GB):  86%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ | 31/36 [00:02<00:00, 14.08it/s] Capturing batches (bs=8 avail_mem=85.46 GB):  92%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–| 33/36 [00:02<00:00, 14.71it/s]Capturing batches (bs=4 avail_mem=85.45 GB):  92%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–| 33/36 [00:02<00:00, 14.71it/s]Capturing batches (bs=2 avail_mem=85.45 GB):  92%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–| 33/36 [00:02<00:00, 14.71it/s]Capturing batches (bs=2 avail_mem=85.45 GB):  97%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹| 35/36 [00:02<00:00, 15.84it/s]Capturing batches (bs=1 avail_mem=85.44 GB):  97%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹| 35/36 [00:02<00:00, 15.84it/s]Capturing batches (bs=1 avail_mem=85.44 GB): 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 36/36 [00:02<00:00, 14.34it/s]
[05:34:34] âœ“ 46.0ç§’
[05:34:34] 
GPU 1æ˜¾å­˜ä½¿ç”¨:
1, 55734, 143771
[05:34:34] 
ğŸ’¡ æ ¸å¿ƒä¼˜åŒ–è¯´æ˜:
[05:34:34]   ã€Stateful KV Cache - æœ€å…³é”®ä¼˜åŒ–ã€‘
[05:34:34]     â€¢ ä¸€æ¬¡æ€§å®šä¹‰æ•´ä¸ªå¤šè½®å¯¹è¯æµç¨‹
[05:34:34]     â€¢ Runtime å†…éƒ¨ç»´æŠ¤ KV stateï¼Œé¿å…æ¯è½® full prefill
[05:34:34]     â€¢ é¦–è½® prefill + åç»­åª decodeï¼Œå¤§å¹…é™ä½è®¡ç®—å¼€é”€ï¼ˆèŠ‚çœ >99% prefillï¼‰
[05:34:34]   ã€Regex Force Generate + Sleep Env Timeã€‘
[05:34:34]     â€¢ Regexé”æ­»è¾“å‡ºï¼šæ—¢æœ‰çœŸå®ç”Ÿæˆæ—¶é—´ï¼Œåˆç¡®ä¿è¾“å‡ºå®Œå…¨ä¸€è‡´
[05:34:34]     â€¢ æ¯è½®ä¹‹é—´sleepç¯å¢ƒæ‰§è¡Œæ—¶é—´ï¼ˆæ¨¡æ‹ŸçœŸå®åœºæ™¯ï¼‰
[05:34:34]   ã€æ˜¾å­˜ç®¡ç†ã€‘
[05:34:34]     â€¢ mem_fraction=0.88: å……åˆ†åˆ©ç”¨æ˜¾å­˜ç©ºé—´ï¼ˆvs é»˜è®¤0.8ï¼‰
[05:34:34]     â€¢ max_total_tokens=131k: æ›´å¤§çš„KV cacheå®¹é‡ï¼ˆæ”¯æŒé•¿å¯¹è¯ï¼‰
[05:34:34]   ã€ååé‡è®¡ç®—ã€‘
[05:34:34]     â€¢ æ»‘åŠ¨çª—å£ï¼ˆ10ç§’ï¼‰ï¼šåæ˜ å½“å‰å®æ—¶æ€§èƒ½
[05:34:34]     â€¢ ç´¯è®¡å¹³å‡ï¼šåæ˜ æ•´ä½“å¹³å‡æ€§èƒ½
[05:34:34]   ã€æ³¨æ„ã€‘
[05:34:34]     â€¢ éƒ¨åˆ†é«˜çº§è°ƒåº¦å‚æ•°å·²æ³¨é‡Šï¼ˆSGLang ç‰ˆæœ¬å…¼å®¹æ€§ï¼‰
[05:34:34]     â€¢ Stateful KV Cache æ˜¯æœ€æ ¸å¿ƒä¼˜åŒ–ï¼Œæ•ˆæœæœ€æ˜¾è‘—
[05:34:34] 
[3/3] æµ‹è¯•...
[05:34:34] 
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[05:34:34] Batch Size 3
[05:34:34] 
======================================================================
[05:34:34] æµ‹è¯• Batch Size (å¹¶å‘æ•°): 3
[05:34:34] ======================================================================
[05:34:34] å‡†å¤‡æ•°æ®...
[05:34:34]   å‡†å¤‡: 10/50
[05:34:34]   å‡†å¤‡: 20/50
[05:34:34]   å‡†å¤‡: 30/50
[05:34:34]   å‡†å¤‡: 40/50
[05:34:34]   å‡†å¤‡: 50/50
[05:34:34] âœ“ å‡†å¤‡å®Œæˆ, avg env: 20.22ç§’
[05:34:34] å¼€å§‹å¹¶å‘æ¨ç†ï¼ˆå¹¶å‘æ•°=3ï¼‰...
[05:34:34] ğŸ’¡ Stateful æ¨¡å¼ï¼šRegex Force Generate + Sleep Env Time
[05:34:34]    â†’ Runtime å†…éƒ¨ç»´æŠ¤ KV cacheï¼Œé¿å…é‡å¤ prefillï¼ˆæœ€å…³é”®ä¼˜åŒ–ï¼‰
[05:34:34]    â†’ Regexé”æ­»è¾“å‡ºï¼šæ—¢æœ‰çœŸå®ç”Ÿæˆæ—¶é—´ï¼Œåˆç¡®ä¿è¾“å‡ºå®Œå…¨ä¸€è‡´
[05:34:34]    â†’ æ¯è½®ä¹‹é—´sleepç¯å¢ƒæ‰§è¡Œæ—¶é—´ï¼Œæ¨¡æ‹ŸçœŸå®åœºæ™¯
[05:34:34]    â†’ SGLang è‡ªåŠ¨ dynamic batching å¤„ç†å¹¶å‘è¯·æ±‚
[05:38:02]   è¿›åº¦: 5/50 (10%) | è½¨è¿¹: 0.024æ¡/ç§’ | Token(æ»‘çª—): 125.22tok/ç§’ | Token(ç´¯è®¡): 91.34tok/ç§’ | å·²ç”¨æ—¶: 208.4ç§’
[05:40:10]   è¿›åº¦: 10/50 (20%) | è½¨è¿¹: 0.030æ¡/ç§’ | Token(æ»‘çª—): 118.70tok/ç§’ | Token(ç´¯è®¡): 95.29tok/ç§’ | å·²ç”¨æ—¶: 336.0ç§’
[05:43:09]   è¿›åº¦: 15/50 (30%) | è½¨è¿¹: 0.029æ¡/ç§’ | Token(æ»‘çª—): 77.33tok/ç§’ | Token(ç´¯è®¡): 93.44tok/ç§’ | å·²ç”¨æ—¶: 515.3ç§’
[05:46:28]   è¿›åº¦: 20/50 (40%) | è½¨è¿¹: 0.028æ¡/ç§’ | Token(æ»‘çª—): 114.45tok/ç§’ | Token(ç´¯è®¡): 96.34tok/ç§’ | å·²ç”¨æ—¶: 714.0ç§’
[05:48:37]   è¿›åº¦: 25/50 (50%) | è½¨è¿¹: 0.030æ¡/ç§’ | Token(æ»‘çª—): 156.18tok/ç§’ | Token(ç´¯è®¡): 95.16tok/ç§’ | å·²ç”¨æ—¶: 843.0ç§’
[05:52:11]   è¿›åº¦: 30/50 (60%) | è½¨è¿¹: 0.028æ¡/ç§’ | Token(æ»‘çª—): 114.04tok/ç§’ | Token(ç´¯è®¡): 94.01tok/ç§’ | å·²ç”¨æ—¶: 1056.9ç§’
[05:55:47]   è¿›åº¦: 35/50 (70%) | è½¨è¿¹: 0.027æ¡/ç§’ | Token(æ»‘çª—): 106.45tok/ç§’ | Token(ç´¯è®¡): 94.34tok/ç§’ | å·²ç”¨æ—¶: 1273.4ç§’
[05:58:48]   è¿›åº¦: 40/50 (80%) | è½¨è¿¹: 0.028æ¡/ç§’ | Token(æ»‘çª—): 106.76tok/ç§’ | Token(ç´¯è®¡): 94.10tok/ç§’ | å·²ç”¨æ—¶: 1454.5ç§’
[06:02:16]   è¿›åº¦: 45/50 (90%) | è½¨è¿¹: 0.027æ¡/ç§’ | Token(æ»‘çª—): 91.86tok/ç§’ | Token(ç´¯è®¡): 93.84tok/ç§’ | å·²ç”¨æ—¶: 1662.4ç§’
[06:05:30]   è¿›åº¦: 50/50 (100%) | è½¨è¿¹: 0.027æ¡/ç§’ | Token(æ»‘çª—): 48.12tok/ç§’ | Token(ç´¯è®¡): 92.44tok/ç§’ | å·²ç”¨æ—¶: 1856.4ç§’
[06:05:30] 
======================================================================
[06:05:30] Batch Size 3 æµ‹è¯•å®Œæˆ
[06:05:30] ======================================================================
[06:05:30]   âœ“ æˆåŠŸ: 50/50 æ¡è½¨è¿¹
[06:05:30]   âœ— å¤±è´¥: 0 æ¡
[06:05:30]   â±ï¸  æ€»è€—æ—¶: 1856.35 ç§’ (å¹³å‡ 37.13ç§’/æ¡)
[06:05:30]   ğŸ“Š è½¨è¿¹åå: 0.027 æ¡/ç§’
[06:05:30]   ğŸš€ Tokenåå: 92.44 tok/ç§’
[06:05:30]   ğŸ’¬ æ€»tokens: 171,604
[06:05:30]   ğŸ“ å¹³å‡tokens: 3432 tokens/è½¨è¿¹
[06:05:30]   ğŸ“ˆ è®°å½•æ•°: 2,500 æ¡ï¼ˆæ¯è½¨è¿¹50æ¡ï¼‰
[06:05:30] ======================================================================
[06:05:32] 
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
[06:05:32] Batch Size 4
[06:05:32] 
======================================================================
[06:05:32] æµ‹è¯• Batch Size (å¹¶å‘æ•°): 4
[06:05:32] ======================================================================
[06:05:32] å‡†å¤‡æ•°æ®...
[06:05:32]   å‡†å¤‡: 10/50
[06:05:32]   å‡†å¤‡: 20/50
[06:05:32]   å‡†å¤‡: 30/50
[06:05:32]   å‡†å¤‡: 40/50
[06:05:32]   å‡†å¤‡: 50/50
[06:05:32] âœ“ å‡†å¤‡å®Œæˆ, avg env: 20.22ç§’
[06:05:32] å¼€å§‹å¹¶å‘æ¨ç†ï¼ˆå¹¶å‘æ•°=4ï¼‰...
[06:05:32] ğŸ’¡ Stateful æ¨¡å¼ï¼šRegex Force Generate + Sleep Env Time
[06:05:32]    â†’ Runtime å†…éƒ¨ç»´æŠ¤ KV cacheï¼Œé¿å…é‡å¤ prefillï¼ˆæœ€å…³é”®ä¼˜åŒ–ï¼‰
[06:05:32]    â†’ Regexé”æ­»è¾“å‡ºï¼šæ—¢æœ‰çœŸå®ç”Ÿæˆæ—¶é—´ï¼Œåˆç¡®ä¿è¾“å‡ºå®Œå…¨ä¸€è‡´
[06:05:32]    â†’ æ¯è½®ä¹‹é—´sleepç¯å¢ƒæ‰§è¡Œæ—¶é—´ï¼Œæ¨¡æ‹ŸçœŸå®åœºæ™¯
[06:05:32]    â†’ SGLang è‡ªåŠ¨ dynamic batching å¤„ç†å¹¶å‘è¯·æ±‚
[06:08:48]   è¿›åº¦: 5/50 (10%) | è½¨è¿¹: 0.026æ¡/ç§’ | Token(æ»‘çª—): 121.66tok/ç§’ | Token(ç´¯è®¡): 108.63tok/ç§’ | å·²ç”¨æ—¶: 195.9ç§’
[06:10:57]   è¿›åº¦: 10/50 (20%) | è½¨è¿¹: 0.031æ¡/ç§’ | Token(æ»‘çª—): 62.30tok/ç§’ | Token(ç´¯è®¡): 107.67tok/ç§’ | å·²ç”¨æ—¶: 325.1ç§’
[06:13:04]   è¿›åº¦: 15/50 (30%) | è½¨è¿¹: 0.033æ¡/ç§’ | Token(æ»‘çª—): 89.39tok/ç§’ | Token(ç´¯è®¡): 107.46tok/ç§’ | å·²ç”¨æ—¶: 451.2ç§’
[06:15:39]   è¿›åº¦: 20/50 (40%) | è½¨è¿¹: 0.033æ¡/ç§’ | Token(æ»‘çª—): 159.61tok/ç§’ | Token(ç´¯è®¡): 112.50tok/ç§’ | å·²ç”¨æ—¶: 606.6ç§’
[06:17:59]   è¿›åº¦: 25/50 (50%) | è½¨è¿¹: 0.033æ¡/ç§’ | Token(æ»‘çª—): 100.58tok/ç§’ | Token(ç´¯è®¡): 111.17tok/ç§’ | å·²ç”¨æ—¶: 746.7ç§’
[06:20:50]   è¿›åº¦: 30/50 (60%) | è½¨è¿¹: 0.033æ¡/ç§’ | Token(æ»‘çª—): 99.03tok/ç§’ | Token(ç´¯è®¡): 109.83tok/ç§’ | å·²ç”¨æ—¶: 917.3ç§’
[06:24:04]   è¿›åº¦: 35/50 (70%) | è½¨è¿¹: 0.031æ¡/ç§’ | Token(æ»‘çª—): 108.43tok/ç§’ | Token(ç´¯è®¡): 109.65tok/ç§’ | å·²ç”¨æ—¶: 1111.8ç§’
[06:27:03]   è¿›åº¦: 40/50 (80%) | è½¨è¿¹: 0.031æ¡/ç§’ | Token(æ»‘çª—): 136.32tok/ç§’ | Token(ç´¯è®¡): 109.29tok/ç§’ | å·²ç”¨æ—¶: 1290.9ç§’
[06:29:49]   è¿›åº¦: 45/50 (90%) | è½¨è¿¹: 0.031æ¡/ç§’ | Token(æ»‘çª—): 140.60tok/ç§’ | Token(ç´¯è®¡): 109.12tok/ç§’ | å·²ç”¨æ—¶: 1456.7ç§’
[06:32:15]   è¿›åº¦: 50/50 (100%) | è½¨è¿¹: 0.031æ¡/ç§’ | Token(æ»‘çª—): 34.89tok/ç§’ | Token(ç´¯è®¡): 107.09tok/ç§’ | å·²ç”¨æ—¶: 1602.5ç§’
[06:32:15] 
======================================================================
[06:32:15] Batch Size 4 æµ‹è¯•å®Œæˆ
[06:32:15] ======================================================================
[06:32:15]   âœ“ æˆåŠŸ: 50/50 æ¡è½¨è¿¹
[06:32:15]   âœ— å¤±è´¥: 0 æ¡
[06:32:15]   â±ï¸  æ€»è€—æ—¶: 1602.46 ç§’ (å¹³å‡ 32.05ç§’/æ¡)
[06:32:15]   ğŸ“Š è½¨è¿¹åå: 0.031 æ¡/ç§’
[06:32:15]   ğŸš€ Tokenåå: 107.09 tok/ç§’
[06:32:15]   ğŸ’¬ æ€»tokens: 171,606
[06:32:15]   ğŸ“ å¹³å‡tokens: 3432 tokens/è½¨è¿¹
[06:32:15]   ğŸ“ˆ è®°å½•æ•°: 2,500 æ¡ï¼ˆæ¯è½¨è¿¹50æ¡ï¼‰
[06:32:15] ======================================================================
[06:32:17] 
================================================================================
[06:32:17] ğŸ¯ æµ‹è¯•æ±‡æ€» - Stateful KV Cache æ‰€æœ‰Batch Sizeç»“æœå¯¹æ¯”
[06:32:17] ================================================================================
BS   æ€»è€—æ—¶        å¹³å‡/æ¡       è½¨è¿¹åå           Tokenåå        æ€»Tokens      Tok/è½®     
     (ç§’)        (ç§’)        (æ¡/ç§’)          (tok/ç§’)                               
--------------------------------------------------------------------------------
3    1856.35    37.13      0.027          92.44          171,604      68.6      
4    1602.46    32.05      0.031          107.09         171,606      68.6      
[06:32:17] ================================================================================
[06:32:17] ğŸ’¡ æ³¨æ„ï¼šRegex Force Generate + Sleep Env Time æ¨¡å¼
[06:32:17]    â€¢ Regexé”æ­»è¾“å‡ºï¼šæœ‰çœŸå®generateæ—¶é—´ï¼Œè¾“å‡ºå®Œå…¨ä¸€è‡´
[06:32:17]    â€¢ Sleep env_timeï¼šæ¨¡æ‹ŸçœŸå®ç¯å¢ƒæ‰§è¡Œæ—¶é—´
[06:32:17]    â€¢ Stateful KV Cacheï¼šé¿å…é‡å¤ prefill çš„æ”¶ç›Š
[06:32:17] 
ğŸ† æ€§èƒ½æœ€ä¼˜:
[06:32:17]   â€¢ è½¨è¿¹ååæœ€é«˜: BS=4, 0.031æ¡/ç§’
[06:32:17]   â€¢ Tokenååæœ€é«˜: BS=4, 107.09tok/ç§’
[06:32:17]   â€¢ å•æ¡æœ€å¿«: BS=4, 32.05ç§’/æ¡
[06:32:17] ================================================================================
[06:32:17] 
âœ“ Metadata: per_turn_metrics_stateful_gpu1_50traj_50turns_bs3_4.jsonl
[06:32:17] âœ“ Summary: per_turn_summary_stateful_gpu1_50traj_50turns_bs3_4.json
[06:32:17] æ€»è®°å½•æ•°: 5000
[06:32:17] 
âœ“ å®Œæˆ!
/home/ruobai/.local/share/uv/python/cpython-3.11.13-linux-x86_64-gnu/lib/python3.11/multiprocessing/resource_tracker.py:254: UserWarning: resource_tracker: There appear to be 1 leaked semaphore objects to clean up at shutdown
  warnings.warn('resource_tracker: There appear to be %d '
